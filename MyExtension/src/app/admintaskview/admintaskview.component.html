<div class="task-container">
  <div class="header">
    <h2>All Tasks</h2>
    <div class="task-controls">
      <span class="task-count">Total: {{ tasks.length }}</span>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading">Loading tasks...</div>

  <!-- Edit Task -->
  <div *ngIf="editingTaskId !== null" class="edit-task-form">
    <h3>Edit Task</h3>
    <form [formGroup]="taskForm" (ngSubmit)="updateTask()">
      <input type="text" formControlName="name" placeholder="Enter task name" class="edit-input" />
      <button type="submit" class="btn btn-save">Save</button>
      <button type="button" class="btn btn-cancel" (click)="cancelEdit()">Cancel</button>
    </form>
  </div>

  <!-- Task Table -->
  <div class="table-wrapper" *ngIf="!isLoading">
    <table class="task-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Task Name</th>
          <th>Assigned Users</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of tasks">
          <td>{{ task.id }}</td>
          <td>{{ task.name }}</td>
          <td>
            <div class="assigned-users">
              <span *ngFor="let user of task.assignedUsers" class="user-badge">
                {{ user.username }}
                <button (click)="unassignTask(task.id, user.id)" class="unassign-btn">Ã—</button>
              </span>
              <select (change)="onUserSelect($event, task.id)" class="user-select">
                <option value="">Assign User</option>
                <option *ngFor="let user of users" [value]="user.id">{{ user.username }}</option>
              </select>
            </div>
          </td>
          <td>
            <button class="btn btn-edit" (click)="editTask(task)">Edit</button>
            <button class="btn btn-delete" (click)="deleteTask(task.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
